

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>fractopo.branches_and_nodes module &mdash; fractopo-2D 0.1 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> fractopo-2D
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">fractopo.branches_and_nodes module</a></li>
</ul>
</div>
            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">fractopo-2D</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>fractopo.branches_and_nodes module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/apidoc/fractopo.branches_and_nodes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="module-fractopo.branches_and_nodes">
<span id="fractopo-branches-and-nodes-module"></span><h1>fractopo.branches_and_nodes module<a class="headerlink" href="#module-fractopo.branches_and_nodes" title="Permalink to this headline">¶</a></h1>
<dl class="py function">
<dt id="fractopo.branches_and_nodes.additional_snapping_func">
<code class="sig-prename descclassname">fractopo.branches_and_nodes.</code><code class="sig-name descname">additional_snapping_func</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">trace</span><span class="p">:</span> <span class="n">shapely.geometry.linestring.LineString</span></em>, <em class="sig-param"><span class="n">idx</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">additional_snapping</span><span class="p">:</span> <span class="n">List<span class="p">[</span>Tuple<span class="p">[</span>int<span class="p">, </span>shapely.geometry.point.Point<span class="p">]</span><span class="p">]</span></span></em><span class="sig-paren">)</span> &#x2192; shapely.geometry.linestring.LineString<a class="headerlink" href="#fractopo.branches_and_nodes.additional_snapping_func" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts points into LineStrings to make sure trace intersects Y-node.</p>
<p>E.g.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">2.25</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">additional_snapping</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">point</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">additional_snapping_func</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">additional_snapping</span><span class="p">)</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;LINESTRING (0 0, 1 0, 2 0, 2.25 0.1, 3 0)&#39;</span>
</pre></div>
</div>
<p>When idx doesn’t match -&gt; no additional snapping</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">idx</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">2.25</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">additional_snapping</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">point</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">additional_snapping_func</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">additional_snapping</span><span class="p">)</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;LINESTRING (0 0, 1 0, 2 0, 3 0)&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="fractopo.branches_and_nodes.angle_to_point">
<code class="sig-prename descclassname">fractopo.branches_and_nodes.</code><code class="sig-name descname">angle_to_point</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">point</span><span class="p">:</span> <span class="n">shapely.geometry.point.Point</span></em>, <em class="sig-param"><span class="n">nearest_point</span><span class="p">:</span> <span class="n">shapely.geometry.point.Point</span></em>, <em class="sig-param"><span class="n">comparison_point</span><span class="p">:</span> <span class="n">shapely.geometry.point.Point</span></em><span class="sig-paren">)</span> &#x2192; float<a class="headerlink" href="#fractopo.branches_and_nodes.angle_to_point" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the angle between two vectors which are made from the given
points: Both vectors have the same first point, nearest_point, and second
point is either point or comparison_point.</p>
<p>Returns angle in degrees.</p>
<p>E.g.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nearest_point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comparison_point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">angle_to_point</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">nearest_point</span><span class="p">,</span> <span class="n">comparison_point</span><span class="p">)</span>
<span class="go">90.0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nearest_point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">comparison_point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">angle_to_point</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">nearest_point</span><span class="p">,</span> <span class="n">comparison_point</span><span class="p">)</span>
<span class="go">71.56505117707799</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="fractopo.branches_and_nodes.branches_and_nodes">
<code class="sig-prename descclassname">fractopo.branches_and_nodes.</code><code class="sig-name descname">branches_and_nodes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">traces</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>geopandas.geoseries.GeoSeries<span class="p">, </span>geopandas.geodataframe.GeoDataFrame<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">areas</span><span class="p">:</span> <span class="n">Union<span class="p">[</span>geopandas.geoseries.GeoSeries<span class="p">, </span>geopandas.geodataframe.GeoDataFrame<span class="p">]</span></span></em>, <em class="sig-param"><span class="n">snap_threshold</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">allowed_loops</span><span class="o">=</span><span class="default_value">10</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>geopandas.geodataframe.GeoDataFrame<span class="p">, </span>geopandas.geodataframe.GeoDataFrame<span class="p">]</span><a class="headerlink" href="#fractopo.branches_and_nodes.branches_and_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine branches and nodes of given traces.</p>
<p>The traces will be cropped to the given target area(s) to correctly</p>
</dd></dl>

<dl class="py function">
<dt id="fractopo.branches_and_nodes.determine_branch_identity">
<code class="sig-prename descclassname">fractopo.branches_and_nodes.</code><code class="sig-name descname">determine_branch_identity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">number_of_I_nodes</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">number_of_XY_nodes</span><span class="p">:</span> <span class="n">int</span></em>, <em class="sig-param"><span class="n">number_of_E_nodes</span><span class="p">:</span> <span class="n">int</span></em><span class="sig-paren">)</span> &#x2192; str<a class="headerlink" href="#fractopo.branches_and_nodes.determine_branch_identity" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines the identity of a branch based on the amount of I-, XY- and E-nodes
and returns it as a string.</p>
<p>E.g.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">determine_branch_identity</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;I - I&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">determine_branch_identity</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;C - I&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">determine_branch_identity</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">&#39;I - E&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="fractopo.branches_and_nodes.determine_nodes">
<code class="sig-prename descclassname">fractopo.branches_and_nodes.</code><code class="sig-name descname">determine_nodes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">trace_geodataframe</span><span class="p">:</span> <span class="n">geopandas.geodataframe.GeoDataFrame</span></em>, <em class="sig-param"><span class="n">snap_threshold</span><span class="p">:</span> <span class="n">float</span></em>, <em class="sig-param"><span class="n">interactions</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">endpoints</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>List<span class="p">[</span>shapely.geometry.point.Point<span class="p">]</span><span class="p">, </span>List<span class="p">[</span>Tuple<span class="p">[</span>int<span class="p">, </span><span class="p">…</span><span class="p">]</span><span class="p">]</span><span class="p">]</span><a class="headerlink" href="#fractopo.branches_and_nodes.determine_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines points of interest between traces.</p>
<p>The points are linked to the indexes of the traces if
trace_geodataframe with the returned node_id_data list. node_id_data
contains tuples of ids. The ids represent indexes of
nodes_of_interaction. The order of the node_id_data tuples is
equivalent to the trace_geodataframe trace indexes.</p>
<p>Conditionals interactions and endpoints allow for choosing what
to return specifically.</p>
<p>TODO: Waiting for branches and nodes refactor.</p>
</dd></dl>

<dl class="py function">
<dt id="fractopo.branches_and_nodes.get_branch_identities">
<code class="sig-prename descclassname">fractopo.branches_and_nodes.</code><code class="sig-name descname">get_branch_identities</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branches</span><span class="p">:</span> <span class="n">geopandas.geoseries.GeoSeries</span></em>, <em class="sig-param"><span class="n">nodes</span><span class="p">:</span> <span class="n">geopandas.geoseries.GeoSeries</span></em>, <em class="sig-param"><span class="n">node_identities</span><span class="p">:</span> <span class="n">list</span></em>, <em class="sig-param"><span class="n">snap_threshold</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#fractopo.branches_and_nodes.get_branch_identities" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine the type of branch i.e. C-C, C-I or I-I for all branches of a
GeoSeries.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">branches</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span>
<span class="gp">... </span>           <span class="n">LineString</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]),</span>
<span class="gp">... </span>           <span class="n">LineString</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]),</span>
<span class="gp">... </span>           <span class="n">LineString</span><span class="p">([(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)]),</span>
<span class="gp">... </span>           <span class="n">LineString</span><span class="p">([(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)]),</span>
<span class="gp">... </span>    <span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nodes</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),]</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">node_identities</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">snap_threshold</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_branch_identities</span><span class="p">(</span><span class="n">branches</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">node_identities</span><span class="p">,</span> <span class="n">snap_threshold</span><span class="p">)</span>
<span class="go">[&#39;C - I&#39;, &#39;C - I&#39;, &#39;C - I&#39;, &#39;C - E&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="fractopo.branches_and_nodes.get_node_identities">
<code class="sig-prename descclassname">fractopo.branches_and_nodes.</code><code class="sig-name descname">get_node_identities</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">traces</span><span class="p">:</span> <span class="n">geopandas.geoseries.GeoSeries</span></em>, <em class="sig-param"><span class="n">nodes</span><span class="p">:</span> <span class="n">geopandas.geoseries.GeoSeries</span></em>, <em class="sig-param"><span class="n">areas</span><span class="p">:</span> <span class="n">geopandas.geoseries.GeoSeries</span></em>, <em class="sig-param"><span class="n">snap_threshold</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; List<span class="p">[</span>str<span class="p">]</span><a class="headerlink" href="#fractopo.branches_and_nodes.get_node_identities" title="Permalink to this definition">¶</a></dt>
<dd><p>Determines the type of node i.e. E, X, Y or I.
Uses the given traces to assess the number of intersections.</p>
<p>E.g.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">traces</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">LineString</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]),</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)])]</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nodes</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),]</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">areas</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">([</span><span class="n">Polygon</span><span class="p">([(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)])])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">snap_threshold</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_node_identities</span><span class="p">(</span><span class="n">traces</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">areas</span><span class="p">,</span> <span class="n">snap_threshold</span><span class="p">)</span>
<span class="go">[&#39;X&#39;, &#39;I&#39;, &#39;I&#39;, &#39;I&#39;, &#39;E&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="fractopo.branches_and_nodes.insert_point_to_linestring">
<code class="sig-prename descclassname">fractopo.branches_and_nodes.</code><code class="sig-name descname">insert_point_to_linestring</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">trace</span><span class="p">:</span> <span class="n">shapely.geometry.linestring.LineString</span></em>, <em class="sig-param"><span class="n">point</span><span class="p">:</span> <span class="n">shapely.geometry.point.Point</span></em><span class="sig-paren">)</span> &#x2192; shapely.geometry.linestring.LineString<a class="headerlink" href="#fractopo.branches_and_nodes.insert_point_to_linestring" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts given point to given trace LineString.
The point location is determined to fit into the LineString without
changing the geometrical order of LineString vertices
(which only makes sense if LineString is sublinear.)</p>
<p>TODO/Note: Does not work for 2.5D geometries (Z-coordinates).
Z-coordinates will be lost.</p>
<p>E.g.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">1.25</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">insert_point_to_linestring</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;LINESTRING (0 0, 1 0, 1.25 0.1, 2 0, 3 0)&#39;</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">trace</span> <span class="o">=</span> <span class="n">LineString</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">point</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">2.25</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">insert_point_to_linestring</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span><span class="o">.</span><span class="n">wkt</span>
<span class="go">&#39;LINESTRING (0 0, 1 0, 2 0, 2.25 0.1, 3 0)&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="fractopo.branches_and_nodes.remove_identical_sindex">
<code class="sig-prename descclassname">fractopo.branches_and_nodes.</code><code class="sig-name descname">remove_identical_sindex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">geosrs</span><span class="p">:</span> <span class="n">geopandas.geoseries.GeoSeries</span></em>, <em class="sig-param"><span class="n">snap_threshold</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; geopandas.geoseries.GeoSeries<a class="headerlink" href="#fractopo.branches_and_nodes.remove_identical_sindex" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove stacked nodes by using a search buffer the size of snap_threshold.</p>
</dd></dl>

<dl class="py function">
<dt id="fractopo.branches_and_nodes.snap_traces">
<code class="sig-prename descclassname">fractopo.branches_and_nodes.</code><code class="sig-name descname">snap_traces</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">traces</span><span class="p">:</span> <span class="n">geopandas.geoseries.GeoSeries</span></em>, <em class="sig-param"><span class="n">snap_threshold</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>geopandas.geoseries.GeoSeries<span class="p">, </span>bool<span class="p">]</span><a class="headerlink" href="#fractopo.branches_and_nodes.snap_traces" title="Permalink to this definition">¶</a></dt>
<dd><p>Snaps traces to end exactly at other traces when the trace endpoint
is within the snap threshold of another trace.</p>
<p>E.g. when within snap_threshold:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">traces</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">GeoSeries</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[</span><span class="n">LineString</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)]),</span> <span class="n">LineString</span><span class="p">([(</span><span class="mf">1.9999</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">)])]</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">snap_threshold</span> <span class="o">=</span> <span class="mf">0.001</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">snap_traces</span><span class="p">(</span><span class="n">traces</span><span class="p">,</span> <span class="n">snap_threshold</span><span class="p">)</span>
<span class="go">(0    LINESTRING (1.00000 1.00000, 2.00000 2.00000, ...</span>
<span class="go">1       LINESTRING (2.00000 2.00000, -2.00000 5.00000)</span>
<span class="go">dtype: geometry, True)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt id="fractopo.branches_and_nodes.snap_traces_alternative">
<code class="sig-prename descclassname">fractopo.branches_and_nodes.</code><code class="sig-name descname">snap_traces_alternative</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">traces</span><span class="p">:</span> <span class="n">geopandas.geoseries.GeoSeries</span></em>, <em class="sig-param"><span class="n">snap_threshold</span><span class="p">:</span> <span class="n">float</span></em><span class="sig-paren">)</span> &#x2192; Tuple<span class="p">[</span>geopandas.geoseries.GeoSeries<span class="p">, </span>bool<span class="p">]</span><a class="headerlink" href="#fractopo.branches_and_nodes.snap_traces_alternative" title="Permalink to this definition">¶</a></dt>
<dd><p>Snaps traces to end exactly at other traces when the trace endpoint
is within the snap threshold of another trace.</p>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Nikolas Ovaskainen

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>